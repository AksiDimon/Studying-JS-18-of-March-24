//______________________
const first = () => new Promise(r => setTimeout(r, 3000, 'first'));
const second = () => new Promise(r => setTimeout(r, 2000, 'second'));

// first().then(function (val) {
//   console.log(val, '!@#')
//    second();
// }).then((val) => console.log(val, 'Â±Â±Â±'));



function third() {
  return "third";
}

first().then(third()) //Ñ‚Ð°Ðº ÐºÐ°Ðº Ð·Ð´ÐµÑÑŒ Ð¼Ñ‹ Ð¿ÐµÑ€ÐµÐ´Ð°ÐµÐ¼ third() ÑÐ¾ ÑÐºÐ¾Ð±ÐºÐ°Ð¼Ð¸, Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÑ‚ÑÑ CÑ€Ð°Ð·Ñƒ. Ð­Ñ‚Ð¾ Ð½Ðµ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾. Ð’Ð¼ÐµÑÑ‚Ð¾ Ñ‚Ð¾Ð³Ð¾ Ñ‡Ñ‚Ð¾ Ð±Ñ‹ Ð¿ÐµÑ€ÐµÐ´Ð°Ð²Ð°Ñ‚ÑŒ ÑÑÑ‹Ð»ÐºÑƒ Ð½Ð° Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ, Ð²Ð¾Ñ‚ Ñ‚Ð°Ðº; third, Ð¸ ÐºÐ¾Ð³Ð´Ð° Ð¾Ð½Ð° Ð·Ð°Ð²ÐµÑ€ÑˆÐ¸Ñ‚ÑÑ  Ñ‚Ð¾Ð³Ð´Ð° Ð¾Ð½Ð° Ð¿Ð¾Ð¿Ð¾Ð´ÐµÑ‚ ÑÐ¾ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸ÐµÐ¼ onFulfilled ÑÑ‚Ð¾Ð³Ð¾ Ð¿Ñ€Ð¾Ð¼Ð¸ÑÐ° Ð² ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¹ then()
.then(x => console.log(x, 'ðŸ‘¾'));// Ñ‚Ð°Ðº ÐºÐ°Ðº third() ÑÑ‚Ð¾ Ð½Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ, then() Ð¿Ð¾Ð´ÑÑ‚Ð°Ð²Ð»ÑÐµÑ‚ ÐºÐ¾Ð»Ð±ÑÐº (x) => x, Ð° Ð² X Ð¿ÐµÑ€ÐµÐ´Ð°ÐµÑ‚ÑÑ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð¿Ñ€Ð¾Ð¼Ð¸ÑÐ° first

first().then(third)
.then(x => console.log(x, '0')); // Ñ‚Ð°Ðº ÐºÐ°Ðº third ÑÑ‚Ð¾ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ  then() Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÐµÑ‚ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹  ÑÑ‚Ð¾Ð¹ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ ÐºÐ¾Ð³Ð´Ð° Ð´Ð¾Ñ…Ð¾Ð´Ð¸Ñ‚ Ð¾Ñ‡ÐµÑ€ÐµÐ´ÑŒ Ð´Ð¾ ÑÑ‚Ð¾Ð³Ð¾ then() Ð¸ ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑÑ Ð´Ð»Ñ ÑÑ‚Ð¾Ð³Ð¾ then() ÑÑ‚Ð¸Ð¼ Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸ÐµÐ¼ onFulfilled 

first().then(x => x, third()).then(x => console.log(x, 'ðŸ‘¾')) // ÑÑ‚Ð° Ð·Ð°Ð¿Ð¸ÑÑŒ ÑÐ´ÐµÐ½Ñ‚Ð¸Ñ‡Ð½Ð° Ð·Ð°Ð¿Ð¸ÑÐ¸ Ñ 'ðŸ‘¾' Ð²Ñ‹ÑˆÐµ
first().then(() => {return third()}).then((x) => console.log(x, '0')) // ÑÑ‚Ð° Ð·Ð°Ð¿Ð¸ÑÑŒ ÑÐ´ÐµÐ½Ñ‚Ð¸Ñ‡Ð½Ð° Ð·Ð°Ð¿Ð¸ÑÐ¸ Ñ '0' Ð²Ñ‹ÑˆÐµ. ÐŸÑ€Ð¾ÑÑ‚Ð¾ Ñ‚Ð° Ð¿ÐµÑ€ÐµÐ´Ð°ÐµÑ‚ÑÑ ÑÑÑ‹Ð»ÐºÐ° Ð½Ð° Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ, Ð° Ð·Ð´ÐµÑÑŒ ÑÑ‚Ð° Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð½ÐµÐ¿Ð¾ÑÑ€ÐµÐ´ÑÑ‚Ð²ÐµÐ½Ð½Ð¾ Ð² then() Ð¿Ð¾ÑÑ‚Ð¾Ð¼Ñƒ Ð½ÑƒÐ¶Ð½Ð¾ Ð¿Ð¸ÑÐ°Ñ‚ÑŒ ÑÐ¾ÑÐºÐ¾Ð±ÐºÐ°Ð¼Ð¸ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ third() Ð° Ñ‚Ð¾Ñ‚ Ñ‡Ñ‚Ð¾ Ð²Ñ‹ÑˆÐµ Ð¿Ñ€Ð¸Ð¼ÐµÑ€ Ð² then Ð¿ÐµÑ€ÐµÐ´Ð°Ð²Ð°Ñ‚ÑŒ Ð±ÐµÐ· (). // ÐŸÐ¾Ñ‚Ð¾Ð¼Ñƒ Ñ‡Ñ‚Ð¾ Ñ‚Ð° Ñ„ÑƒÐ½ÐºÑ†Ð¸Ñ Ñ‡Ñ‚Ð¾ Ð²Ñ‹ÑˆÐµ Ð·Ð°Ð¿Ð¸ÑÐ°Ð½Ð° Ð±ÐµÐ· ÐºÐ¾Ð»Ð±ÑÐºÐ°, Ñ‚Ð°Ð¼ ÑÐºÐ¸Ð»ÐµÑ‚ Ð²Ñ‹Ð·Ñ‹Ð²Ð°ÐµÐ¼Ð¾Ð¹ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ function() {} Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸  ÐºÐ°Ðº Ð±Ñ‹ Ð±Ñ‹Ð·Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð²Ð¼ÐµÑÑ‚Ð¾ ÐºÐ¾Ð»Ð±ÑÐºÐ° Ð² then Ð¸ Ð¾Ð½ Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÑ‚ onfulfilld  Ñ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð¼ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ third, Ð¸ Ð·Ð° ÑÑ‡ÐµÑ‚ ÑÑ‚Ð¾Ð³Ð¾ Ð¼Ñ‹ Ð² ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ¼ then Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÐ¼ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ ÑÑ‚Ð¾Ð¹ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸.



//____________
//
function sum(p1, p2) {
  
  const res1 =  new Promise ((resolve) => {
    const data1 = p1.then((num) => num)
    resolve(data1)
  })
  const res2 = new Promise (resolve => {
    const data2 = p2.then(num => num)
    resolve(data2)
  })
  return new Promise (resolve => {
    resolve(Promise.all([res1,res2]).then(num => num[0] + num[1]))
  })
}

const p1 = new Promise(resolve => resolve(1));
const p2 = new Promise(resolve => resolve(2));

sum(p1, p2).then(result => {
  console.log(result); // 1 + 2 === 3
})

